

char copy_parms_tcl_proc[]=
"#!/usr/bin/wish -f\n"
"\n"
"global copy_parms copy_parms_help\n"
"set copy_parms 0\n"
"set copy_parms_help 0\n"
"set copy_selected_parms 1\n"
"\n"
"global copy_from_sec copy_to_sec\n"
"global copy_from_sup copy_to_sup\n"
"\n"
"proc CopyParmsDialog {} {\n"
"\n"
"	global copy_parms\n"
"   global sec sup\n"
"	global copy_from_sec copy_to_sec\n"
"	global copy_from_sup copy_to_sup\n"
"	global copy_selected_parms\n"
"\n"
"	# Make sure window is not already open\n"
"	if {[expr $copy_parms!=0]} then {return}\n"
"	set copy_parms 1\n"
"\n"
"	set path .copy_parms\n"
"	toplevel $path\n"
"\n"
"	wm title $path \"DC3 Copy Paramters\"\n"
"	wm transient $path .\n"
"\n"
"	# Initialize globals to current setting in control window\n"
"	set copy_from_sec $sec\n"
"	set copy_from_sup $sup\n"
"	set copy_to_sec $sec\n"
"	set copy_to_sup $sup\n"
"\n"
"	################## Create some frames ##################\n"
"	frame $path.top\n"
"	frame $path.bot -relief groove -borderwidth 2\n"
"	pack $path.top $path.bot -side top -fill both\n"
"\n"
"	################## Create \"Dismiss\" button ##############\n"
"	button $path.bot.dismiss -text \"Dismiss\" -command {destroy .copy_parms;set copy_parms 0}\n"
"	pack $path.bot.dismiss\n"
"\n"
"	\n"
"   ############ Create \"From\" Superlayer/Sector buttons ##########\n"
"   frame $path.top.from -borderwidth 3 -relief groove\n"
"   pack $path.top.from -side left\n"
"   label $path.top.from.lab -text \"Copy From\"\n"
"   pack $path.top.from.lab -side top\n"
"   set w $path.top.from.secsup\n"
"   frame $w \n"
"   frame $w.sec -borderwidth 3 -relief groove\n"
"   frame $w.sup -borderwidth 3 -relief groove\n"
"   label $w.sec.lab -text \"Sector\"\n"
"   label $w.sup.lab -text \"Superlayer\"\n"
"   pack $w.sec.lab -side top\n"
"   pack $w.sup.lab -side top\n"
"   for {set i 6} {[expr $i>=0]} {incr i -1} {\n"
"      radiobutton $w.sec.sec$i -text Sec$i -value $i -variable copy_from_sec -anchor w\n"
"      radiobutton $w.sup.sup$i -text SL$i -value $i -variable copy_from_sup -anchor w\n"
"      pack $w.sec.sec$i -side bottom -fill x\n"
"      pack $w.sup.sup$i -side bottom -fill x\n"
"   }\n"
"   $w.sec.sec0 configure -text \"All\"\n"
"   $w.sup.sup0 configure -text \"All\" -state disabled\n"
"   pack $w.sup $w.sec -side left\n"
"   pack $w -side top -fill x \n"
"\n"
"	################# \"-->\" arrow ###################\n"
"	label $path.top.arrow -text \"-->\"\n"
"	pack $path.top.arrow -side left\n"
"\n"
"   ############ Create \"To\" Superlayer/Sector buttons ##########\n"
"   frame $path.top.to -borderwidth 3 -relief groove\n"
"   pack $path.top.to -side left\n"
"   label $path.top.to.lab -text \"Copy To\"\n"
"   pack $path.top.to.lab -side top\n"
"   set w $path.top.to.secsup\n"
"   frame $w\n"
"   frame $w.sec -borderwidth 3 -relief groove\n"
"   frame $w.sup -borderwidth 3 -relief groove\n"
"   label $w.sec.lab -text \"Sector\"\n"
"   label $w.sup.lab -text \"Superlayer\"\n"
"   pack $w.sec.lab -side top\n"
"   pack $w.sup.lab -side top\n"
"   for {set i 6} {[expr $i>=0]} {incr i -1} {\n"
"      radiobutton $w.sec.sec$i -text Sec$i -value $i -variable copy_to_sec -anchor w\n"
"      radiobutton $w.sup.sup$i -text SL$i -value $i -variable copy_to_sup -anchor w\n"
"      pack $w.sec.sec$i -side bottom -fill x\n"
"      pack $w.sup.sup$i -side bottom -fill x\n"
"   }\n"
"   $w.sec.sec0 configure -text \"All\"\n"
"   $w.sup.sup0 configure -text \"All\" -state disabled\n"
"   pack $w.sup $w.sec -side left\n"
"   pack $w -side top -fill x \n"
"\n"
"	################### Copy buttons ################\n"
"	set w $path.top.cb\n"
"	frame $w\n"
"	pack $w -side right -fill y\n"
"	button $w.copy -text \"Copy\" -command {CopyUserParms $copy_from_sec $copy_to_sec $copy_from_sup $copy_to_sup $copy_selected_parms}\n"
"	pack $w.copy -side top -fill both\n"
"	button $w.copysector -text \"Copy to all\nSectors\" -command {CopyParmsSector}\n"
"	pack $w.copysector -side top -fill both\n"
"	checkbutton $w.copyselected -text \"Copy selected\nparameters\" -variable copy_selected_parms\n"
"	pack $w.copyselected -side top -fill x -ipady 10\n"
"	button $w.help -text \"help\" -command {CopyParmsHelp}\n"
"	pack $w.help -side bottom -fill both\n"
"\n"
"	CenterWindow $path\n"
"}\n"
"\n"
"proc CopyParmsHelp {} {\n"
"\n"
"	global copy_parms copy_parms_help\n"
"	\n"
"	# Make sure copy_parms window is open\n"
"	if {[expr $copy_parms==0]} then {return}\n"
"\n"
"	# Make sure window is not already open\n"
"	if {[expr $copy_parms_help!=0]} then {return}\n"
"	set copy_parms_help 1\n"
"\n"
"	# Create help message in string\n"
"	set mess \"\"\n"
"	append mess \"This window allows you to copy the parms used in one superlayer to another. \"\n"
"	append mess \"This uses only the \\\"user\\\" parameters.\\n\\n\"\n"
"	append mess \"Use \\\"Copy\\\" to copy a single superlayer/sector.\\n\\n\"\n"
"	append mess \"Use \\\"Copy to all Sectors\\\" to copy a single superlayer/sector to all sectors \"\n"
"	append mess \"of the same superlayer.\"\n"
"	append mess \"\\n\\n\"\n"
"	append mess \"If the 'Copy selected parameters' button is checked, then only the following \"\n"
"	append mess \"parameters are copied: ff, p1-p4, xvst function type, and all timewalk \"\n"
"	append mess \"parameters.\\n\\n\"\n"
"	append mess \"If it is not checked, then the remaining parameters, including tzero and tmax \"\n"
"	append mess \"are copied in addition to those listed above.\"\n"
"\n"
"	# Open dialog window\n"
"	tk_dialog .copy_parms_help \"DC3: Copy Parms Help\" $mess info 0 \"OK\"\n"
"\n"
"	set copy_parms_help 0\n"
"}\n"
"\n"
"proc CopyParmsSector {} {\n"
"\n"
"	global copy_from_sec copy_to_sec\n"
"	global copy_from_sup copy_to_sup\n"
"\n"
"	set save_copy_to_sec $copy_to_sec\n"
"\n"
"	for {set i 0} {[expr $i<=6]} {incr i} {\n"
"		set copy_to_sec $i\n"
"		update\n"
"		update\n"
"		after 100\n"
"		.copy_parms.top.cb.copy invoke\n"
"	}\n"
"\n"
"	set copy_to_sec $save_copy_to_sec\n"
"}\n"
"\n"
"\n"
"\n"
"\n"
"\n"
"\n"
"\n"

;

