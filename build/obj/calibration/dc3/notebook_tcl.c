

char notebook_tcl_proc[]=
"# A Notebook widget for Tcl/Tk\n"
"# $Revision: 1.5 $\n"
"#\n"
"# Copyright (C) 1996,1997,1998 D. Richard Hipp\n"
"#\n"
"# This library is free software; you can redistribute it and/or\n"
"# modify it under the terms of the GNU Library General Public\n"
"# License as published by the Free Software Foundation; either\n"
"# version 2 of the License, or (at your option) any later version.\n"
"#\n"
"# This library is distributed in the hope that it will be useful,\n"
"# but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
"# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n"
"# Library General Public License for more details.\n"
"# \n"
"# You should have received a copy of the GNU Library General Public\n"
"# License along with this library; if not, write to the\n"
"# Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n"
"# Boston, MA  02111-1307, USA.\n"
"#\n"
"# Author contact information:\n"
"#   drh@acm.org\n"
"#   http://www.hwaci.com/drh/\n"
"\n"
"# Added for easy linking to C variable D.Lawrence\n"
"global notebook_page\n"
"\n"
"#\n"
"# Create a new notebook widget\n"
"#\n"
"proc Notebook:create {w args} {\n"
"  global Notebook\n"
"  set Notebook($w,width) 450\n"
"  set Notebook($w,height) 350\n"
"  set Notebook($w,pages) {}\n"
"  set Notebook($w,top) 0\n"
"  set Notebook($w,pad) 5\n"
"  set Notebook($w,fg,on) black\n"
"  set Notebook($w,fg,off) grey50\n"
"  canvas $w -bd 0 -highlightthickness 0 -takefocus 0\n"
"  set Notebook($w,bg) [$w cget -bg]\n"
"  bind $w <1> \"Notebook:click $w %x %y\"\n"
"  bind $w <Configure> \"Notebook:scheduleExpand $w\"\n"
"  eval Notebook:config $w $args\n"
"}\n"
"\n"
"#\n"
"# Change configuration options for the notebook widget\n"
"#\n"
"proc Notebook:config {w args} {\n"
"  global Notebook\n"
"  foreach {tag value} $args {\n"
"    switch -- $tag {\n"
"      -width {\n"
"        set Notebook($w,width) $value\n"
"      }\n"
"      -height {\n"
"        set Notebook($w,height) $value\n"
"      }\n"
"      -pages {\n"
"        set Notebook($w,pages) $value\n"
"      }\n"
"      -pad {\n"
"        set Notebook($w,pad) $value\n"
"      }\n"
"      -bg {\n"
"        set Notebook($w,bg) $value\n"
"      }\n"
"      -fg {\n"
"        set Notebook($w,fg,on) $value\n"
"      }\n"
"      -disabledforeground {\n"
"        set Notebook($w,fg,off) $value\n"
"      }\n"
"    }\n"
"  }\n"
"\n"
"  #\n"
"  # After getting new configuration values, reconstruct the widget\n"
"  #\n"
"  $w delete all\n"
"  set Notebook($w,x1) $Notebook($w,pad)\n"
"  set Notebook($w,x2) [expr $Notebook($w,x1)+2]\n"
"  set Notebook($w,x3) [expr $Notebook($w,x2)+$Notebook($w,width)]\n"
"  set Notebook($w,x4) [expr $Notebook($w,x3)+2]\n"
"  set Notebook($w,y1) [expr $Notebook($w,pad)+2]\n"
"  set Notebook($w,y2) [expr $Notebook($w,y1)+2]\n"
"  set Notebook($w,y5) [expr $Notebook($w,y1)+30]\n"
"  set Notebook($w,y6) [expr $Notebook($w,y5)+2]\n"
"  set Notebook($w,y3) [expr $Notebook($w,y6)+$Notebook($w,height)]\n"
"  set Notebook($w,y4) [expr $Notebook($w,y3)+2]\n"
"  set x $Notebook($w,x1)\n"
"  set cnt 0\n"
"  set y7 [expr $Notebook($w,y1)+10]\n"
"  foreach p $Notebook($w,pages) {\n"
"    set Notebook($w,p$cnt,x5) $x\n"
"    set id [$w create text 0 0 -text $p -anchor nw -tags \"p$cnt t$cnt\"]\n"
"    set bbox [$w bbox $id]\n"
"    set width [lindex $bbox 2]\n"
"    $w move $id [expr $x+10] $y7\n"
"    $w create line \\n"
"       $x $Notebook($w,y5)\\n"
"       $x $Notebook($w,y2) \\n"
"       [expr $x+2] $Notebook($w,y1) \\n"
"       [expr $x+$width+16] $Notebook($w,y1) \\n"
"       -width 2 -fill white -tags p$cnt\n"
"    $w create line \\n"
"       [expr $x+$width+16] $Notebook($w,y1) \\n"
"       [expr $x+$width+18] $Notebook($w,y2) \\n"
"       [expr $x+$width+18] $Notebook($w,y5) \\n"
"       -width 2 -fill black -tags p$cnt\n"
"    set x [expr $x+$width+20]\n"
"    set Notebook($w,p$cnt,x6) [expr $x-2]\n"
"    if {![winfo exists $w.f$cnt]} {\n"
"      frame $w.f$cnt -bd 0\n"
"    }\n"
"    $w.f$cnt config -bg $Notebook($w,bg)\n"
"    place $w.f$cnt -x $Notebook($w,x2) -y $Notebook($w,y6) \\n"
"      -width $Notebook($w,width) -height $Notebook($w,height)\n"
"    incr cnt\n"
"  }\n"
"  $w create line \\n"
"     $Notebook($w,x1) [expr $Notebook($w,y5)-2] \\n"
"     $Notebook($w,x1) $Notebook($w,y3) \\n"
"     -width 2 -fill white\n"
"  $w create line \\n"
"     $Notebook($w,x1) $Notebook($w,y3) \\n"
"     $Notebook($w,x2) $Notebook($w,y4) \\n"
"     $Notebook($w,x3) $Notebook($w,y4) \\n"
"     $Notebook($w,x4) $Notebook($w,y3) \\n"
"     $Notebook($w,x4) $Notebook($w,y6) \\n"
"     $Notebook($w,x3) $Notebook($w,y5) \\n"
"     -width 2 -fill black\n"
"  $w config -width [expr $Notebook($w,x4)+$Notebook($w,pad)] \\n"
"            -height [expr $Notebook($w,y4)+$Notebook($w,pad)] \\n"
"            -bg $Notebook($w,bg)\n"
"  set top $Notebook($w,top)\n"
"  set Notebook($w,top) -1\n"
"  Notebook:raise.page $w $top\n"
"}\n"
"\n"
"#\n"
"# This routine is called whenever the mouse-button is pressed over\n"
"# the notebook.  It determines if any page should be raised and raises\n"
"# that page.\n"
"#\n"
"proc Notebook:click {w x y} {\n"
"  global Notebook\n"
"  global notebook_page\n"
"  if {$y<$Notebook($w,y1) || $y>$Notebook($w,y6)} return\n"
"  set N [llength $Notebook($w,pages)]\n"
"  for {set i 0} {$i<$N} {incr i} {\n"
"    if {$x>=$Notebook($w,p$i,x5) && $x<=$Notebook($w,p$i,x6)} {\n"
"      Notebook:raise.page $w $i\n"
"      set notebook_page $i\n"
"      break\n"
"    }\n"
"  }\n"
"}\n"
"\n"
"#\n"
"# For internal use only.  This procedure raised the n-th page of\n"
"# the notebook\n"
"#\n"
"proc Notebook:raise.page {w n} {\n"
"  global Notebook\n"
"  global notebook_page\n"
"  if {$n<0 || $n>=[llength $Notebook($w,pages)]} return\n"
"  set top $Notebook($w,top)\n"
"  if {$top>=0 && $top<[llength $Notebook($w,pages)]} {\n"
"    $w move p$top 0 2\n"
"  }\n"
"  $w move p$n 0 -2\n"
"  $w delete topline\n"
"  if {$n>0} {\n"
"    $w create line \\n"
"       $Notebook($w,x1) $Notebook($w,y6) \\n"
"       $Notebook($w,x2) $Notebook($w,y5) \\n"
"       $Notebook($w,p$n,x5) $Notebook($w,y5) \\n"
"       $Notebook($w,p$n,x5) [expr $Notebook($w,y5)-2] \\n"
"       -width 2 -fill white -tags topline\n"
"  }\n"
"  $w create line \\n"
"    $Notebook($w,p$n,x6) [expr $Notebook($w,y5)-2] \\n"
"    $Notebook($w,p$n,x6) $Notebook($w,y5) \\n"
"    -width 2 -fill white -tags topline\n"
"  $w create line \\n"
"    $Notebook($w,p$n,x6) $Notebook($w,y5) \\n"
"    $Notebook($w,x3) $Notebook($w,y5) \\n"
"    -width 2 -fill white -tags topline\n"
"  set Notebook($w,top) $n\n"
"  raise $w.f$n\n"
"  set notebook_page $n\n"
"}\n"
"\n"
"#\n"
"# Change the page-specific configuration options for the notebook\n"
"#\n"
"proc Notebook:pageconfig {w name args} {\n"
"  global Notebook\n"
"  set i [lsearch $Notebook($w,pages) $name]\n"
"  if {$i<0} return\n"
"  foreach {tag value} $args {\n"
"    switch -- $tag {\n"
"      -state {\n"
"        if {\"$value\"==\"disabled\"} {\n"
"          $w itemconfig t$i -fill $Notebook($w,fg,off)\n"
"        } else {\n"
"          $w itemconfig t$i -fill $Notebook($w,fg,on)\n"
"        }\n"
"      }\n"
"      -onexit {\n"
"        set Notebook($w,p$i,onexit) $value\n"
"      }\n"
"    }\n"
"  }\n"
"}\n"
"\n"
"#\n"
"# This procedure raises a notebook page given its name.  But first\n"
"# we check the \"onexit\" procedure for the current page (if any) and\n"
"# if it returns false, we don't allow the raise to proceed.\n"
"#\n"
"proc Notebook:raise {w name} {\n"
"  global Notebook\n"
"  set i [lsearch $Notebook($w,pages) $name]\n"
"  if {$i<0} return\n"
"  if {[info exists Notebook($w,p$i,onexit)]} {\n"
"    set onexit $Notebook($w,p$i,onexit)\n"
"    if {\"$onexit\"!=\"\" && [eval uplevel #0 $onexit]!=0} {\n"
"      Notebook:raise.page $w $i\n"
"    }\n"
"  } else {\n"
"    Notebook:raise.page $w $i\n"
"  }\n"
"}\n"
"\n"
"#\n"
"# Return the frame associated with a given page of the notebook.\n"
"#\n"
"proc Notebook:frame {w name} {\n"
"  global Notebook\n"
"  set i [lsearch $Notebook($w,pages) $name]\n"
"  if {$i>=0} {\n"
"    return $w.f$i\n"
"  } else {\n"
"    return {}\n"
"  }\n"
"}\n"
"\n"
"#\n"
"# Try to resize the notebook to the next time we become idle.\n"
"#\n"
"proc Notebook:scheduleExpand w {\n"
"  global Notebook\n"
"  if {[info exists Notebook($w,expand)]} return\n"
"  set Notebook($w,expand) 1\n"
"  after idle \"Notebook:expand $w\"\n"
"}\n"
"\n"
"#\n"
"# Resize the notebook to fit inside its containing widget.\n"
"#\n"
"proc Notebook:expand w {\n"
"  global Notebook\n"
"  set wi [expr [winfo width $w]-($Notebook($w,pad)*2+4)]\n"
"  set hi [expr [winfo height $w]-($Notebook($w,pad)*2+36)]\n"
"  Notebook:config $w -width $wi -height $hi\n"
"  catch {unset Notebook($w,expand)}\n"
"}\n"
"\n"

;

