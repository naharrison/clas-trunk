

char tmax_tcl_proc[]=
"#!/usr/bin/wish -f\n"
"\n"
"\n"
"global find_tmax_win\n"
"global tzero tmax\n"
"global tmax_frac tzero_frac\n"
"global tzero_autofrac tmax_region1_autofrac tmax_region2_autofrac tmax_region3_autofrac\n"
"\n"
"\n"
"set tmax 100.0\n"
"set tzero 0.0\n"
"set tmax_frac 0.97\n"
"set tzero_frac 0.03\n"
"set tmax_autofrac 0.0\n"
"\n"
"set smallfont  \"-*-helvetica-medium-o-*-*-9-*-*-*-*-*-*-*\"\n"
"set normalfont  \"-*-times-medium-r-*-*-14-*-*-*-*-*-*-*\"\n"
"set boldfont    \"-*-times-bold-o-*-*-10-*-*-*-*-*-*-*\"\n"
"set bigfont     \"-*-helvetica-medium-o-*-*-14-*-*-*-*-*-*-*\"\n"
"set bigboldfont \"-*-times-bold-r-*-*-14-*-*-*-*-*-*-*\"\n"
"set hugefont     \"-*-helvetica-medium-o-*-*-20-*-*-*-*-*-*-*\"\n"
"set hugeboldfont \"-*-times-bold-r-*-*-20-*-*-*-*-*-*-*\"\n"
"set fixedfont    \"-*-fixed-bold-*-*-*-12-*-*-*-*-*-*-*\"\n"
"\n"
"proc find_tmax {win} {\n"
"   global sec sup\n"
"   global find_tmax_win tmax_frac tzero_frac tmax_region1_autofrac tmax_region2_autofrac tmax_region3_autofrac\n"
"   global tlimt tlim_low\n"
"   global cancel_op\n"
"   global tzero tmax\n"
"   global normalfont boldfont bigboldfont bigfont smallfont hugeboldfont hugefont\n"
"   global tmax_autofrac\n"
"	\n"
"   set find_tmax_win $win\n"
"\n"
"   ################# Tzero  ####################\n"
"   set w $win.tzero\n"
"   frame $w -borderwidth 3 -relief groove\n"
"   pack $w -side top -fill both -pady 30\n"
"\n"
"   set w $win.tzero.top\n"
"   frame $w\n"
"   label $w.lab -text \"Tzero\" -borderwidth 2 -relief groove -padx 40 -pady 5\n"
"   pack $w.lab -side left -fill both\n"
"   frame $w.f\n"
"   frame $w.f.int\n"
"   label $w.f.int.ifraclab -text \"Integral fraction:\"\n"
"   label $w.f.int.ifrac -textvariable tzero_frac -width 6 -anchor w\n"
"   pack $w.f.int.ifrac $w.f.int.ifraclab -side right\n"
"   pack $w.f.int -side top -fill both\n"
"   frame $w.f.auto\n"
"   entry $w.f.auto.en -width 6 -textvariable tzero_autofrac\n"
"   bind $w.f.auto.en <Return> {$find_tmax_win.tzero.find.find invoke}\n"
"   label $w.f.auto.enlab -text \"Autofind fraction:\"\n"
"   pack $w.f.auto.en $w.f.auto.enlab -side right\n"
"   pack $w.f.auto -side top -fill both\n"
"   pack $w.f -side right -fill both\n"
"   pack $w -side top -fill both\n"
"\n"
"   frame $win.tzero.ctls\n"
"   frame $win.tzero.find\n"
"   pack $win.tzero.ctls -side right -fill both\n"
"   pack $win.tzero.find -side left\n"
"   \n"
"   button $win.tzero.find.find -text \"Find\" -width 10 -command {FindTFraction $tzero_autofrac tzero}\n"
"   button $win.tzero.find.findall -text \"Find All\" -width 10 -command {FindTAll $tmax_autofrac tzero}\n"
"   pack $win.tzero.find.find $win.tzero.find.findall -side top -fill x\n"
"   \n"
"   set w $win.tzero.ctls.sbf\n"
"   frame $w\n"
"   scrollbar $w.sb -orient horizontal\\n"
"      -command {scrollvalue $tlim_low $tlimt($sup) $find_tmax_win.tzero.ctls.sbf}\n"
"   entry $w.en -width 10 -textvariable tzero\n"
"   scrollvalue $tlim_low $tlimt($sup) $find_tmax_win.tzero.ctls.sbf moveto 0\n"
"   bind $w.sb <ButtonRelease> {set sec $sec}\n"
"   bind $w.en <KeyPress-KP_Enter> \\n"
"      {entryvalue $tlim_low $tlimt($sup) $find_tmax_win.tzero.ctls.sbf}\n"
"   bind $w.en <Return> \\n"
"      {entryvalue $tlim_low $tlimt($sup) $find_tmax_win.tzero.ctls.sbf}\n"
"   pack $w.sb -side left -fill x -expand 1\n"
"   pack $w.en -side left\n"
"   pack $w -side top -fill both\n"
"\n"
"   set w $win.tzero.ctls.delta\n"
"   frame $w\n"
"   button $w.hunplus -text \"+100\" -font $smallfont -command {DeltaTime 100 $find_tmax_win.tzero.ctls.sbf}\n"
"   button $w.tenplus -text \"+10\" -font $smallfont -command {DeltaTime 10 $find_tmax_win.tzero.ctls.sbf}\n"
"   button $w.oneplus -text \"+1\" -font $smallfont -command {DeltaTime 1 $find_tmax_win.tzero.ctls.sbf}\n"
"   pack $w.hunplus $w.tenplus $w.oneplus -side right\n"
"   button $w.hunminus -text \"-100\" -font $smallfont -command {DeltaTime -100 $find_tmax_win.tzero.ctls.sbf}\n"
"   button $w.tenminus -text \"-10\" -font $smallfont -command {DeltaTime -10 $find_tmax_win.tzero.ctls.sbf}\n"
"   button $w.oneminus -text \"-1\" -font $smallfont -command {DeltaTime -1 $find_tmax_win.tzero.ctls.sbf}\n"
"   pack $w.hunminus $w.tenminus $w.oneminus -side left\n"
"   pack $w -side bottom -fill both\n"
"   \n"
"\n"
"   ################# Tmax  ####################\n"
"   set w $win.tmax\n"
"   frame $w -borderwidth 3 -relief groove\n"
"   pack $w -side top -fill both -pady 30\n"
"\n"
"   set w $win.tmax.top\n"
"   frame $w\n"
"   label $w.lab -text \"Tmax\" -borderwidth 2 -relief groove -padx 40 -pady 5\n"
"   pack $w.lab -side left -fill both\n"
"   frame $w.f\n"
"   frame $w.f.int\n"
"   label $w.f.int.ifraclab -text \"Integral fraction:\"\n"
"   label $w.f.int.ifrac -textvariable tmax_frac -width 6 -anchor w\n"
"   pack $w.f.int.ifrac $w.f.int.ifraclab -side right\n"
"   pack $w.f.int -side top -fill both\n"
"   frame $w.f.autoreg1\n"
"   entry $w.f.autoreg1.en -width 6 -textvariable tmax_region1_autofrac\n"
"   bind $w.f.autoreg1.en <Return> {$find_tmax_win.tmax.find.find invoke}\n"
"   label $w.f.autoreg1.enlab -text \"Autofind fraction (Region1):\"\n"
"   pack $w.f.autoreg1.en $w.f.autoreg1.enlab -side right\n"
"   pack $w.f.autoreg1 -side top -fill both\n"
"   frame $w.f.autoreg2\n"
"   entry $w.f.autoreg2.en -width 6 -textvariable tmax_region2_autofrac\n"
"   bind $w.f.autoreg2.en <Return> {$find_tmax_win.tmax.find.find invoke}\n"
"   label $w.f.autoreg2.enlab -text \"Autofind fraction (Region2):\"\n"
"   pack $w.f.autoreg2.en $w.f.autoreg2.enlab -side right\n"
"   pack $w.f.autoreg2 -side top -fill both\n"
"   frame $w.f.autoreg3\n"
"   entry $w.f.autoreg3.en -width 6 -textvariable tmax_region3_autofrac\n"
"   bind $w.f.autoreg3.en <Return> {$find_tmax_win.tmax.find.find invoke}\n"
"   label $w.f.autoreg3.enlab -text \"Autofind fraction (Region3):\"\n"
"   pack $w.f.autoreg3.en $w.f.autoreg3.enlab -side right\n"
"   pack $w.f.autoreg3 -side top -fill both\n"
"   frame $w.f.auto\n"
"   pack $w.f -side right -fill both\n"
"   pack $w -side top -fill both\n"
"\n"
"   frame $win.tmax.ctls\n"
"   frame $win.tmax.find\n"
"   pack $win.tmax.ctls -side right -fill both\n"
"   pack $win.tmax.find -side left\n"
"   \n"
"   button $win.tmax.find.find -text \"Find\" -width 9 -command \\n"
"   {FindTFraction [expr $sup>2 ? ($sup>4 ? $tmax_region3_autofrac:$tmax_region2_autofrac):$tmax_region1_autofrac] tmax}\n"
"   button $win.tmax.find.findall -text \"Find All\" -width 9 -command {FindTAll $tmax_autofrac tmax}\n"
"   pack $win.tmax.find.find $win.tmax.find.findall -side top -fill x\n"
"   \n"
"   set w $win.tmax.ctls.sbf\n"
"   frame $w\n"
"   scrollbar $w.sb -orient horizontal\\n"
"      -command {scrollvalue $tlim_low $tlimt($sup) $find_tmax_win.tmax.ctls.sbf}\n"
"   entry $w.en -width 10 -textvariable tmax\n"
"   scrollvalue $tlim_low $tlimt($sup) $find_tmax_win.tmax.ctls.sbf moveto 0\n"
"   bind $w.sb <ButtonRelease> {set sec $sec}\n"
"   bind $w.en <KeyPress-KP_Enter> \\n"
"      {entryvalue $tlim_low $tlimt($sup) $find_tmax_win.tmax.ctls.sbf}\n"
"   bind $w.en <Return> \\n"
"      {entryvalue $tlim_low $tlimt($sup) $find_tmax_win.tmax.ctls.sbf}\n"
"   pack $w.sb -side left -fill x -expand 1\n"
"   pack $w.en -side left\n"
"   pack $w -side top -fill both\n"
"\n"
"   set w $win.tmax.ctls.delta\n"
"   frame $w\n"
"   button $w.hunplus -text \"+100\" -font $smallfont -command {DeltaTime 100 $find_tmax_win.tmax.ctls.sbf}\n"
"   button $w.tenplus -text \"+10\" -font $smallfont -command {DeltaTime 10 $find_tmax_win.tmax.ctls.sbf}\n"
"   button $w.oneplus -text \"+1\" -font $smallfont -command {DeltaTime 1 $find_tmax_win.tmax.ctls.sbf}\n"
"   pack $w.hunplus $w.tenplus $w.oneplus -side right\n"
"   button $w.hunminus -text \"-100\" -font $smallfont -command {DeltaTime -100 $find_tmax_win.tmax.ctls.sbf}\n"
"   button $w.tenminus -text \"-10\" -font $smallfont -command {DeltaTime -10 $find_tmax_win.tmax.ctls.sbf}\n"
"   button $w.oneminus -text \"-1\" -font $smallfont -command {DeltaTime -1 $find_tmax_win.tmax.ctls.sbf}\n"
"   pack $w.hunminus $w.tenminus $w.oneminus -side left\n"
"   pack $w -side bottom -fill both\n"
" \n"
"   ############### Reset buttons #################\n"
"   set w $win.reset\n"
"   frame $w\n"
"   button $w.reset -text \"Reset\" -command {ResetTValue}\n"
"   button $w.resetall -text \"Reset All\" -command {ResetTValues}\n"
"   pack $w.reset $w.resetall -side left -ipadx 20\n"
"   pack $w -side bottom\n"
" \n"
"   ############### Tmax Table button #################\n"
"   ## Added by Philip Coltharp, coltharp@jlab.org\n"
"   set w $win.misc\n"
"   frame $w\n"
"   button $w.tmaxtable -text \"Tmax Table\" -command {TmaxTable}\n"
"   pack $w.tmaxtable -side left \n"
"   pack $w -side bottom -fill x\n"
" \n"
"}\n"
"\n"
"proc DeltaTime {del path} {\n"
"\n"
"   global sec sup\n"
"   global tlimt tlim_low\n"
"   \n"
"   # Get current Setting\n"
"   set val [expr [$path.en get]+$del]\n"
"   \n"
"   # Clear entry and write in new value\n"
"   $path.en delete 0 end\n"
"   $path.en insert 0 $val\n"
"   \n"
"   # Update scrollbar\n"
"   entryvalue $tlim_low $tlimt($sup) $path\n"
"\n"
"}\n"
"\n"
"\n"
"proc FindTAll {frac who} {\n"
"\n"
"   global find_tmax_win\n"
"   global sec sup\n"
"   global setreplotglobal_id\n"
"   \n"
"   set save_sec $sec\n"
"   set save_sup $sup\n"
"\n"
"	# Have the screen update while we're filling the histos\n"
"	SetReplotGlobal\n"
"   \n"
"   for {set sup 1} {[expr $sup<7]} {incr sup} {\n"
"      for {set sec 0} {[expr $sec<7]} {incr sec} {\n"
"         update\n"
"         $find_tmax_win.$who.find.find invoke\n"
"      }\n"
"      set sec 6\n"
"   }\n"
"   \n"
"   set sup $save_sup\n"
"   set sec $save_sec\n"
"\n"
"	after cancel after idle SetReplotGlobal\n"
"	after cancel SetReplotGlobal\n"
"}\n"
"\n"
"\n"

;

